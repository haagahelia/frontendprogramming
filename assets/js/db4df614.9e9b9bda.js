"use strict";(self.webpackChunkfrontendcourse=self.webpackChunkfrontendcourse||[]).push([[1514],{8199:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"reactproject/performance","title":"Performance","description":"Profiler","source":"@site/docs/reactproject/performance.md","sourceDirName":"reactproject","slug":"/reactproject/performance","permalink":"/frontendprogramming/docs/reactproject/performance","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Performance","sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Todolist Example","permalink":"/frontendprogramming/docs/reactproject/todolist"},"next":{"title":"Env Variables","permalink":"/frontendprogramming/docs/reactproject/env"}}');var o=r(4848),s=r(8453);const i={title:"Performance",sidebar_position:5},c=void 0,l={},a=[{value:"Profiler",id:"profiler",level:3},{value:"Excessive re-renders",id:"excessive-re-renders",level:3}];function d(e){const n={a:"a",code:"code",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h3,{id:"profiler",children:"Profiler"}),"\n",(0,o.jsxs)(n.p,{children:["React Developer Tools provides ",(0,o.jsx)(n.strong,{children:"Profiler"})," that helps identify parts of an application that are slow. Open the browser console and open Profiler panel. Initially  the Profiler panel is empty and you can start new session by pressing the Record button. Then you use your React app as you normally would. When you are ready, press the Stop button."]}),"\n",(0,o.jsxs)(n.p,{children:["The React profiler show ",(0,o.jsx)(n.strong,{children:"commits"}),"  that are made in your React app. The commit is the moment when React applies changes to the DOM. In the each commit you can see what components were rendered and the time it takes. If you move cursor to a component, you can also see why it was rendered."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Profiler",src:r(4544).A+"",width:"1672",height:"355"})}),"\n",(0,o.jsxs)(n.p,{children:["Read more about Profiler in ",(0,o.jsx)(n.a,{href:"https://legacy.reactjs.org/blog/2018/09/10/introducing-the-react-profiler.html",children:"https://legacy.reactjs.org/blog/2018/09/10/introducing-the-react-profiler.html"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["React also provides ",(0,o.jsx)(n.code,{children:"Profiler"})," component that can be used programmatically analyze you React app' sperformance (",(0,o.jsx)(n.a,{href:"https://react.dev/reference/react/Profiler",children:"https://react.dev/reference/react/Profiler"}),")"]}),"\n",(0,o.jsx)(n.h3,{id:"excessive-re-renders",children:"Excessive re-renders"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"It is good to understand that when a component re-renders all of its child components also re-renders, and in some cases this might be potential performance issue."}),"\n",(0,o.jsx)(n.li,{children:"Let's see one practical example:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:'function ParentComponent() {\n  const [text, setText] = useState("");\n\n  return (\n    <div>\n      <input value={text} onChange={e => setText(e.target.value)} />\n      <ChildComponent />\n    </div>\n  );\n};\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"ChildComponent"})," looks the following."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"function ChildComponent() {\n  console.log('Child is re-rendered');\n  return <p>Child</p>;\n};\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Now, each time you type something to the ",(0,o.jsx)(n.code,{children:"input"})," element, ",(0,o.jsx)(n.code,{children:"ChildComponent"})," also re-renders, and we can see 'Child is re-rendered' text in the console."]}),"\n",(0,o.jsxs)(n.li,{children:["What if there is some time-consuming operation in the ",(0,o.jsx)(n.code,{children:"ChildComponent"})," like in the following example code?"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"function ChildComponent() {\n  let now = performance.now();\n  while (performance.now() - now < 1000) {\n    // do nothing for 1000ms\n  }\n  return <p>Child</p>;\n}\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Now, whenever you input text into the text field, there's a 200 ms delay, and the user interface is noticeably slow."}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"ChildComponent"})," is re-rendered each time the ",(0,o.jsx)(n.code,{children:"ParentComponent"})," re-renders, even when no data is changing, and a re-render isn't necessary."]}),"\n",(0,o.jsx)(n.li,{children:"The solution to this problem is so called 'Lifting content up'."}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:'export default function App() {\n  return (\n    <ParentComponent>\n      <ChildComponent />\n    </ParentComponent>\n  );\n}\n\nfunction ParentComponent({children}) {\n  const [text, setText] = useState("");\n\n  return (\n    <div>\n      <input value={text} onChange={e => setText(e.target.value)}>\n      {children}\n    </div>\n  );\n};\n\nfunction ChildComponent() {\n  let now = performance.now();\n  while (performance.now() - now < 200) {\n    // do nothing for 200ms\n  }\n  return <p>Child</p>;\n};\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Now, we pass the ",(0,o.jsx)(n.code,{children:"ChildComponent"})," to the ",(0,o.jsx)(n.code,{children:"ParentComponent"})," using ",(0,o.jsx)(n.code,{children:"props"}),". When ",(0,o.jsx)(n.code,{children:"text"})," state changes, the ",(0,o.jsx)(n.code,{children:"ParentComponent"})," is re-rendered. But the ",(0,o.jsx)(n.code,{children:"props"})," is not changed; therefore, ",(0,o.jsx)(n.code,{children:"ChildComponent"})," is not re-rendered."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"The syntax:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"<ParentComponent>\n  <ChildComponent />\n</ParentComponent>\n"})}),"\n",(0,o.jsx)(n.p,{children:"Can be also written in the following way:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"<ParentComponent children={<ChildComponent />}>\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},4544:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/profiler-d167657a56fc9592856a5f46ced78a8f.png"},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>c});var t=r(6540);const o={},s=t.createContext(o);function i(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);
"use strict";(self.webpackChunkfrontendcourse=self.webpackChunkfrontendcourse||[]).push([[1460],{1980:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>d,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"reactproject/split","title":"Split components","description":"Let\'s refactor the todolist example application by breaking it into multiple components.","source":"@site/docs/reactproject/split.md","sourceDirName":"reactproject","slug":"/reactproject/split","permalink":"/frontendprogramming/docs/reactproject/split","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Split components","sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Todolist Example","permalink":"/frontendprogramming/docs/reactproject/todolist"},"next":{"title":"Performance","permalink":"/frontendprogramming/docs/reactproject/performance"}}');var s=o(4848),i=o(8453);const d={title:"Split components",sidebar_position:5},r=void 0,l={},a=[];function c(e){const t={admonition:"admonition",code:"code",img:"img",mdxAdmonitionTitle:"mdxAdmonitionTitle",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"Let's refactor the todolist example application by breaking it into multiple components."}),"\n",(0,s.jsxs)(t.admonition,{type:"note",children:[(0,s.jsx)(t.mdxAdmonitionTitle,{}),(0,s.jsxs)(t.p,{children:["In this part, we  use the todolist from the assignment, which also includes a date field and delete functionality.\n",(0,s.jsx)(t.img,{alt:"Todolist",src:o(5415).A+"",width:"668",height:"239"})]})]}),"\n",(0,s.jsxs)(t.p,{children:["We will add a new stateless component called ",(0,s.jsx)(t.code,{children:"TodoTable"})," and separate it from the ",(0,s.jsx)(t.code,{children:"TodoList"})," component. After splitting the components, our component tree is the following:"]}),"\n",(0,s.jsx)(t.mermaid,{value:"graph TD;\n  Dataflow((Data flow)) --\x3e App.tsx;\n  App.tsx --\x3e TodoList.tsx;\n  TodoList.tsx --\x3e|props: todos| TodoTable.tsx;\n  \n  style Dataflow fill:none,stroke:none,color:#2C5AA0,font-size:16px;"}),"\n",(0,s.jsxs)(t.p,{children:["React data flow is ",(0,s.jsx)(t.strong,{children:"one-way"}),", from ",(0,s.jsx)(t.strong,{children:"top to bottom"}),", in the component tree."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"TodoTable"})," component will be a child component of the ",(0,s.jsx)(t.code,{children:"TodoList"})," component. Therefore, we can send data from the ",(0,s.jsx)(t.code,{children:"TodoList"})," component to the ",(0,s.jsx)(t.code,{children:"TodoTable"})," component by using the ",(0,s.jsx)(t.code,{children:"props"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["Add a new file called ",(0,s.jsx)(t.code,{children:"TodoTable.tsx"})," into the ",(0,s.jsx)(t.code,{children:"src"})," folder. The starter code of the ",(0,s.jsx)(t.code,{children:"TodoTable"})," component is shown below:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",metastring:'title="TodoTable.tsx"',children:"function TodoTable(props) {\n  return <></>;\n}\n\nexport default TodoTable;\n"})}),"\n",(0,s.jsxs)(t.p,{children:["We need to define the type for the ",(0,s.jsx)(t.code,{children:"props"}),", which contains an array of ",(0,s.jsx)(t.code,{children:"todo"})," objects and delete function. Therefore, we define a new type called ",(0,s.jsx)(t.code,{children:"TodoTableProps"}),"."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",metastring:'title="TodoTable.tsx"',children:"type Todo = {\n  description: string;\n  priority: 'low' | 'medium' | 'high';\n  date: string;\n}\n\ntype TodoTableProps = {\n  todos: Todo[];\n  handleDelete: (row: number) => void;\n}\n\nfunction TodoTable(props: TodoTableProps) {\n  return(\n    <></>\n  );\n}\n\nexport default TodoTable;\n"})}),"\n",(0,s.jsxs)(t.p,{children:["You will notice that we have defined the same ",(0,s.jsx)(t.code,{children:"Todo"})," type in two files. Instead of doing that, it is better to create a separate file for defining types and then import these into the files where they are needed. Create a new file called ",(0,s.jsx)(t.code,{children:"types.ts"})," in the ",(0,s.jsx)(t.code,{children:"src"})," folder and define the types there."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",metastring:'title="types.ts"',children:"export type Todo = {\n  description: string;\n  priority: 'low' | 'medium' | 'high';\n  date: string;\n}\n\nexport type TodoTableProps = {\n  todos: Todo[];\n  handleDelete: (row: number) => void;\n}\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Then, we import the type into the ",(0,s.jsx)(t.code,{children:"TodoTable"})," component where they are needed."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",metastring:'title="TodoTable.tsx"',children:"import type { TodoTableProps } from './types';\n\nfunction TodoTable(props: TodoTableProps) {\n  return (\n    <></>\n  );\n}\n\nexport default TodoTable;\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Now, you can also remove ",(0,s.jsx)(t.code,{children:"Todo"})," type definition in the ",(0,s.jsx)(t.code,{children:"TodoList"})," component and import it from the ",(0,s.jsx)(t.code,{children:"types.ts"})," file."]}),"\n",(0,s.jsxs)(t.admonition,{title:"Type-only imports",type:"note",children:[(0,s.jsxs)(t.p,{children:["You might notice that we use the ",(0,s.jsx)(t.code,{children:"type"})," keyword when importing types."]}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"import type { TodoTableProps, Todo } from './types';\n"})}),(0,s.jsxs)(t.p,{children:["This is so called ",(0,s.jsx)(t.strong,{children:"type-only imports"}),". This tells TypeScript explicitly that ",(0,s.jsx)(t.code,{children:"TodoTableProps"})," is a type that should only be used at compile time and not included in the runtime JavaScript output."]}),(0,s.jsxs)(t.p,{children:["In Vite's TypeScript configuration is the setting ",(0,s.jsx)(t.code,{children:"verbatimModuleSyntax: true"})," which requires type-only imports for types."]})]}),"\n",(0,s.jsxs)(t.p,{children:["Next, we render table in the ",(0,s.jsx)(t.code,{children:"TodoTable"})," component."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",metastring:'title="TodoTable.tsx"',children:"import type { TodoTableProps, Todo } from './types'\n\nfunction TodoTable(props: TodoTableProps) {\n  return(\n    <table>\n      <thead>\n        <tr>\n          <th>Description</th>\n          <th>Priority</th>\n          <th>Duedate</th>\n          <th>Actions</th>\n        </tr>\n      </thead>\n      <tbody>\n        {props.todos.map((todo: Todo, index: number) => (\n          <tr key={index}>\n            <td>{todo.description}</td>\n            <td>{todo.priority}</td>\n            <td>{todo.date}</td>\n            <td>\n              <button onClick={() => props.handleDelete(index)}>Delete</button> \n            </td>\n          </tr>\n        ))}\n      </tbody>\n    </table>     \n  )\n}\n\nexport default TodoTable;\n"})}),"\n",(0,s.jsx)(t.admonition,{type:"info",children:(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"TodoTable"})," component will be a ",(0,s.jsx)(t.strong,{children:"stateless component"}),". The stateless components are easy to test because they are pure functions. They are also simple to understand because they are just functions that takes props as input and returns JSX."]})}),"\n",(0,s.jsxs)(t.p,{children:["Finally, import the ",(0,s.jsx)(t.code,{children:"TodoTable"})," component into the ",(0,s.jsx)(t.code,{children:"TodoList"})," component."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",metastring:'title="TodoList.tsx"',children:"import TodoTable from './TodoTable';\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Replace the HTML ",(0,s.jsx)(t.code,{children:"table"})," element in the ",(0,s.jsx)(t.code,{children:"TodoList"})," component's ",(0,s.jsx)(t.code,{children:"return"})," statement with the ",(0,s.jsx)(t.code,{children:"TodoTable"})," component. Pass the ",(0,s.jsx)(t.code,{children:"todos"})," state and the ",(0,s.jsx)(t.code,{children:"handleDelete"})," function as props to the ",(0,s.jsx)(t.code,{children:"TodoTable"})," component."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",metastring:'title="TodoList.tsx"',children:'return(\n  <>\n    <h3>My Todos</h3>\n    <input \n      placeholder="Description" \n      onChange={event => setTodo({...todo, description: event.target.value})} \n      value={todo.description} \n    />\n    <select\n      title="Priority"\n      onChange={event => setTodo({...todo, priority: event.target.value as \'low\' | \'medium\' | \'high\'})} \n      value={todo.priority} \n    >\n      <option value="low">Low</option>\n      <option value="medium">Medium</option>\n      <option value="high">High</option>\n    </select>\n    <button onClick={addTodo}>Add</button>\n    //highlight-next-line\n    <TodoTable todos={todos} handleDelete={deleteTodo} />\n  </>\n);\n'})}),"\n",(0,s.jsx)(t.p,{children:"Now, the todolist app works as previously. If you open the React Developer tools, you can see new component tree structure."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"todolist with splitted table",src:o(9015).A+"",width:"1234",height:"708"})}),"\n",(0,s.jsx)(t.p,{children:"We have now finalized out todo list app and in the next section we learn how to use third-party components and libraries."})]})}function p(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},5415:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/todolist2-99363b6f2a3431469b276bdacf974772.png"},8453:(e,t,o)=>{o.d(t,{R:()=>d,x:()=>r});var n=o(6540);const s={},i=n.createContext(s);function d(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),n.createElement(i.Provider,{value:t},e.children)}},9015:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/splitted_todolist-7bef324348d028cb91e1ddf1a5d790a3.png"}}]);